version: '1.0'
steps:
    build-step:
        type: build
        dockerfile: Dockerfile
        image-name: ShevchikIvan/demochat
        tag: codefresh
    push to registry:
        type: push
        candidate: ${{build-step}}
        tag: ${{CF_BRANCH}}
    unit-tests:
        image: ${{build-step}}
        fail-fast: false
        working-directory : ${{initial-clone}}
        commands:
           - npm test
           - echo $(date)
